{"mappings":"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","sources":["src/actors/Actor.ts","src/utils/checkLimits.ts","src/actors/Goomba.ts","src/utils/keyboardMap.ts","src/actors/Mario.ts","src/script.ts"],"sourcesContent":["import { Point } from '../types/Point';\n\nexport interface IActor {\n\tposition: Point;\n\tupdate: (delta: number) => void;\n\tdraw: (delta: number, ctx: CanvasRenderingContext2D) => void;\n\tkey_event_down: (key: string) => void;\n\tkey_event_up: (key: string) => void;\n}\n\nexport class Actor implements IActor {\n\tposition: Point;\n\tconstructor(position: Point) {\n\t\tthis.position = position;\n\t}\n\tupdate(delta: number) {}\n\tdraw(delta: number, ctx: CanvasRenderingContext2D) {}\n\tkeyboard_event_down(key: string) {}\n\tkeyboard_event_up(key: string) {}\n}\n","import { Point } from '../types/Point';\nimport { Size } from '../types/Size';\nexport const checkLimits = (\n\tposition: Point,\n\tactorSize: Size,\n\tactorColor: string\n) => {\n\tif (\n\t\tposition.x <\n\t\t\t500 - (actorColor === 'red' ? actorSize.w : actorSize.w * -1) &&\n\t\tposition.x > (actorColor === 'red' ? 0 : 0 - actorSize.w) &&\n\t\tposition.y < 500 - actorSize.h &&\n\t\tposition.y > 0\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n","import { Point } from '../types/Point';\nimport { Size } from '../types/Size';\nimport { Actor } from './Actor';\nimport { checkLimits } from '../utils/checkLimits';\n\nexport class Goomba extends Actor {\n\tgoombaSize: Size;\n\tgoombaColor: string;\n\tgoombaSpeed: number;\n\n\tconstructor(\n\t\tsize: Size = { w: 30, h: 30 },\n\t\tinitialPos: Point = { x: 500 + size.w, y: 350 }\n\t) {\n\t\tsuper(initialPos);\n\t\tthis.goombaSize = size;\n\t\tthis.goombaColor = 'blue';\n\t\tthis.goombaSpeed = 40;\n\t}\n\tupdate(delta: number) {\n\t\tlet newPos: Point = {\n\t\t\tx: this.position.x - this.goombaSpeed * delta,\n\t\t\ty: this.position.y,\n\t\t};\n\t\tif (checkLimits(newPos, this.goombaSize, this.goombaColor)) {\n\t\t\tthis.position = newPos;\n\t\t} else {\n\t\t\tthis.position = { x: 500 + this.goombaSize.w, y: 350 };\n\t\t}\n\t}\n\tdraw(delta: number, ctx: CanvasRenderingContext2D) {\n\t\tctx.fillStyle = this.goombaColor;\n\t\tctx.fillRect(\n\t\t\tthis.position.x,\n\t\t\tthis.position.y,\n\t\t\tthis.goombaSize.w,\n\t\t\tthis.goombaSize.h\n\t\t);\n\t}\n}\n","export enum MarioKey {\n\tUP,\n\tDOWN,\n\tLEFT,\n\tRIGHT,\n}\n\nexport interface KeyboardMap {\n\t[key: string]: MarioKey;\n}\n\nexport let KEYMAP = {\n\tArrowUp: MarioKey.UP,\n\tArrowDown: MarioKey.DOWN,\n\tArrowLeft: MarioKey.LEFT,\n\tArrowRight: MarioKey.RIGHT,\n};\n","import { Point } from '../types/Point';\nimport { Size } from '../types/Size';\nimport { Actor } from './Actor';\nimport { checkLimits } from '../utils/checkLimits';\nimport { MarioKey, KeyboardMap, KEYMAP } from '../utils/keyboardMap';\nexport class Mario extends Actor {\n\tmarioSize: Size;\n\tmarioColor: string;\n\tmarioSpeed: number;\n\tmarioAceleration: number;\n\tkeyboardMap: KeyboardMap;\n\tjumSpeed: number;\n\tjump: boolean;\n\n\tconstructor(\n\t\tsize: Size = { w: 30, h: 30 },\n\t\tinitialPos: Point = { x: 10, y: 350 }\n\t) {\n\t\tsuper(initialPos);\n\t\tthis.marioSize = size;\n\t\tthis.marioColor = 'red';\n\t\tthis.marioSpeed = 0;\n\t\tthis.marioAceleration = 0;\n\t\tthis.keyboardMap = KEYMAP;\n\t\tthis.jumSpeed = 0;\n\t\tthis.jump = false;\n\t}\n\tupdate(delta: number) {\n\t\t// Establecemos una velocidad en relación a la aceleración\n\t\tthis.marioSpeed = this.marioSpeed * 0.9 + this.marioAceleration;\n\t\tlet jumpHeight = 0;\n\t\tif (this.jump) {\n\t\t\t// NOTE: I am not happy with this jump section. The sine is a good idea but the control of the zero limit can be improved.\n\t\t\tthis.jumSpeed += 0.8;\n\t\t\tjumpHeight = 40 * Math.sin(10 * this.jumSpeed * delta) + 40;\n\t\t\tconst checkCero = Number(jumpHeight.toFixed(2));\n\t\t\tif (checkCero < 0.1) {\n\t\t\t\tjumpHeight = 0.1;\n\t\t\t\tthis.jump = false;\n\t\t\t}\n\t\t}\n\t\tlet newPos: Point = {\n\t\t\tx: this.position.x + this.marioSpeed * delta,\n\t\t\ty: 350 - jumpHeight,\n\t\t};\n\t\tif (checkLimits(newPos, this.marioSize, this.marioColor)) {\n\t\t\tthis.position = newPos;\n\t\t}\n\t}\n\tdraw(delta: number, ctx: CanvasRenderingContext2D) {\n\t\tctx.fillStyle = this.marioColor;\n\t\tctx.fillRect(\n\t\t\tthis.position.x,\n\t\t\tthis.position.y,\n\t\t\tthis.marioSize.w,\n\t\t\tthis.marioSize.h\n\t\t);\n\t}\n\tkeyboard_event_down(key: string) {\n\t\tlet tecla = this.keyboardMap[key];\n\t\tif (tecla == MarioKey.LEFT) {\n\t\t\tthis.marioAceleration = -10;\n\t\t} else if (tecla == MarioKey.RIGHT) {\n\t\t\tthis.marioAceleration = 10;\n\t\t} else if (tecla == MarioKey.UP) {\n\t\t\tconsole.log('JUMP!');\n\t\t\tthis.jump = true;\n\t\t}\n\t}\n\tkeyboard_event_up(key: string) {\n\t\tlet tecla = this.keyboardMap[key];\n\t\tif (tecla == MarioKey.RIGHT) {\n\t\t\tthis.marioAceleration = 0;\n\t\t} else if (tecla == MarioKey.LEFT) {\n\t\t\tthis.marioAceleration = 0;\n\t\t}\n\t}\n}\n","import { Goomba } from './actors/Goomba';\nimport { Mario } from './actors/Mario';\n\nwindow.onload = () => {\n\tconsole.log('ready');\n\n\tconst canvas = document.getElementById('canvas') as HTMLCanvasElement;\n\tconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n\tconst mario = new Mario();\n\tconst goomba = new Goomba();\n\n\tconst actors = [goomba, mario];\n\n\tlet lastFrame = 0;\n\tconst render = (time: number) => {\n\t\tconst delta = (time - lastFrame) / 1000;\n\t\tlastFrame = time;\n\n\t\tactors.forEach((actor) => actor.update(delta));\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tactors.forEach((actor) => actor.draw(delta, ctx));\n\n\t\twindow.requestAnimationFrame(render);\n\t};\n\n\tdocument.body.addEventListener('keydown', (e) => {\n\t\tif (mario.keyboard_event_down) {\n\t\t\tmario.keyboard_event_down(e.key);\n\t\t}\n\t});\n\tdocument.body.addEventListener('keyup', (e) => {\n\t\tif (mario.keyboard_event_up) {\n\t\t\tmario.keyboard_event_up(e.key);\n\t\t}\n\t});\n\n\twindow.requestAnimationFrame(render);\n};\n"],"names":["$1be9d8d1634ad3ea$export$f73d3eb6fd876d80","constructor","position","this","update","delta","draw","ctx","keyboard_event_down","key","keyboard_event_up","$cf9377d87986ca70$export$b427d64c03133802","actorSize","actorColor","x","w","y","h","$a173b08dc58b0d5c$export$1c7bc1ba3d7e84e5","size","initialPos","super","goombaSize","goombaColor","goombaSpeed","newPos","fillStyle","fillRect","$45ecd8466228168a$export$931f1d909de3dad0","$45ecd8466228168a$export$194e66e3e22b15bb","ArrowUp","UP","ArrowDown","DOWN","ArrowLeft","LEFT","ArrowRight","RIGHT","$f9f6af20bd5a23c3$export$fc975b129559c2d","marioSize","marioColor","marioSpeed","marioAceleration","keyboardMap","jumSpeed","jump","jumpHeight","Math","sin","Number","toFixed","tecla","console","log","window","onload","canvas","document","getElementById","getContext","mario","actors","lastFrame","render","time","forEach","actor","clearRect","width","height","requestAnimationFrame","body","addEventListener","e"],"version":3,"file":"index.ea03eb57.js.map"}